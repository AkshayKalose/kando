//////////////////////////////////////////////////////////////////////////////////////////
//   _  _ ____ _  _ ___  ____                                                           //
//   |_/  |__| |\ | |  \ |  |    This file belongs to Kando, the cross-platform         //
//   | \_ |  | | \| |__/ |__|    pie menu. Read more on github.com/kando-menu/kando     //
//                                                                                      //
//////////////////////////////////////////////////////////////////////////////////////////

// SPDX-FileCopyrightText: Simon Schneegans <code@simonschneegans.de>
// SPDX-License-Identifier: MIT

#kando-menu-properties-area {
  position: absolute;
  top: $editor-padding-top;
  right: $editor-padding-right;
  padding-left: 1vw;
  padding-bottom: 1vw;

  // Usually, the properties view is displayed on the right side of the menu preview. Here
  // we set the width and height accordingly.
  height: calc(
    100vh - $editor-padding-top - $editor-padding-bottom-small - $toolbar-height
  );
  width: calc(
    (100vw - $editor-padding-left - $editor-padding-right) *
      (1 - $preview-properties-ratio)
  );

  // For vertical screens, we change the layout and display the properties view above the
  // menu preview.
  @media (max-aspect-ratio: $editor-aspect-breakpoint) {
    $width: calc(100vw - $editor-padding-left - $editor-padding-right);
    $preview-height: calc($width / $preview-aspect-ratio);
    width: $width;
    height: calc(
      100vh - $editor-padding-top - $editor-padding-bottom-small - $toolbar-height -
        $preview-height
    );

    padding-left: 0;
  }

  transition: opacity 150ms ease;
  opacity: 0;

  .wip {
    border-radius: 10px;
    border: 2px dashed rgba(255, 255, 255, 0.5);
  }

  #kando-menu-properties-icon-picker,
  #kando-menu-properties-base-settings {
    position: absolute;
    top: 0;
    left: 1vw;
    right: 0;
    bottom: 1vw;

    opacity: 1;
    transform: none;

    transition:
      opacity 150ms ease,
      transform 150ms ease;

    &.hidden {
      transform: scale(0.9);
      pointer-events: none;
      opacity: 0;
    }
  }

  #kando-menu-properties-base-settings.hidden {
    transform: scale(1.1);
  }

  #kando-menu-properties-icon-button {
    flex-basis: content;

    .icon-container {
      @include rfs(5rem, width);
      @include rfs(5rem, height);
    }
  }

  #kando-menu-properties-icon-picker {
    .spinner {
      $size: 128px;

      position: absolute;
      top: calc(50% - $size / 2);
      left: calc(50% - $size / 2);

      pointer-events: none;
      opacity: 0;

      width: $size;
      height: $size;
      border-radius: 50%;
      border-top: 3px solid #fff;
      border-right: 3px solid transparent;
      animation: spinnerRotation 1s linear infinite;

      transition: opacity 500ms ease;
    }

    @keyframes spinnerRotation {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    &.loading .spinner {
      opacity: 1;
    }

    &.loading #kando-properties-icon-picker-grid {
      pointer-events: none;
      visibility: hidden;
    }
  }

  #kando-properties-icon-picker-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(calc(32px + 2vw), 1fr));
    transition: opacity 150ms ease;

    .icon-container {
      border-radius: 5px;
      clip-path: none;
      border: 2px dashed transparent;

      &:active {
        transform: translateY(1px);
      }

      &:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      &.selected {
        background-color: rgba(255, 255, 255, 0.2);
        border: 2px dashed white;
      }
    }
  }
}

#kando-editor.edit-mode #kando-menu-properties-area.visible {
  opacity: 1;
}
